package com.app.ivoke.models;

import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.app.ivoke.helpers.JsonHelper;
import com.app.ivoke.helpers.MessageHelper;
import com.app.ivoke.helpers.WebHelper.NetworkException;
import com.app.ivoke.objects.MuralPost;
import com.app.ivoke.objects.UserIvoke;
import com.google.android.gms.maps.model.LatLng;

public class MuralModel extends WebServer {
	
	public List<MuralPost> getNearbyPosts(LatLng pLatLng, int pDistance) throws NetworkException, JSONException
	{
		List<MuralPost> listMuralPosts = new ArrayList<MuralPost>();
	    String retornoMuralPosts = 
					web.doRequest(site(URL_MURAL_POSTS_GET), 
					              web.makeListParameter("latLngDistance"
						                                , String.valueOf(pLatLng.latitude).replace(".",",") + ";" 
						                                + String.valueOf(pLatLng.longitude).replace(".",",") + ";"
						                                + String.valueOf(pDistance).replace(".",",")));
		
	     JSONArray jsonMuralPosts = new JSONArray(retornoMuralPosts);
		           listMuralPosts = (List<MuralPost>) JsonHelper.toList(jsonMuralPosts);
		
		           return listMuralPosts;
	}
}
